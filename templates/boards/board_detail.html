<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>함께나리:게시글-상세보기</title>
    <link rel="stylesheet" href="../../static/css/board_detail.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container-content"> <!--전체 영역-->
        <div class="contents"> <!--전체 컨텐츠 영역-->
            <div class="top-logo"> <!--맨 위 상단 영역-->
                게시판
            </div>

            <div class="post"> <!--⭐⭐-->
                <div class="post-hd"> <!--프로필, 닉네임, 모집종료 아이콘, 경로-->
                    <div class="user-profile"> <!--프로필 사진-->
                        <img src="../../static/image/profile-post-detail.png" alt="">
                    </div>

                    <div class="user-nickname"> <!-- ⭐⭐닉네임 -->
                        {{ meeting.user_id.nickname }}
                    </div>

                    {% if meeting.status.status_number > 0 %}
                        <div class="end-icon"> <!--모임 종료 아이콘 -->
                            <img src="../../static/image/end-icon.png" alt="">
                        </div>
                    {% endif %}

                    <div class="route"> <!--⭐⭐ 경로 -->
                        {{ meeting.route }}
                    </div>
                </div>

                <div class="post-content"> <!--⭐⭐게시글 내용-->
                    {{ meeting.meeting_content }}
                </div>

                <div class="post-ft"> <!--인원수, 참여하기(or 종료하기) 버튼-->
                    <div class="people-count"> <!--인원수-->
                        <img src="../../static/image/people.png" alt=""> <!--사람들 아이콘-->
                        <span>{{ meeting.participant_count }}명 / 4명</span> <!--⭐⭐ 인원수 글자 -->
                    </div>

                    <div class="post-btn"> <!--참여하기(or 종료하기) 버튼-->
                        {% load custom_tags %}
                        {% button_text meeting.id as Participant_list%}
                        {% if meeting.user_id == request.user %}
                            {% if meeting.status.status_number == 0 %}
                                <button type="button"><a href="#">모집종료</a></button>
                            {% elif meeting.status.status_number == 1 %}
                                <button type="button"><a href="#">정산하기</a></button>
                            {% else %}
                                <button type="button"><a href="#">완료하기</a></button>
                            {% endif %}
                        {% else %}
                            {% if meeting.status.status_number == 0 %}
                                {% if Participant_list %}
                            	    <button type="button"><a href="#">참여취소</a></button>
                                {% else %}
                                    <button type="button"><a href="#">참여하기</a></button>
                                {% endif %}
                            {% endif %}
                        {% endif %}
                    </div>
                </div>

                <div class="people-detail">
                    <div class="title-text"> <!--아이콘, 참여한 사람 텍스트 부분-->
                        <img src="../../static/image/people.png" alt="">
                        참여한 사람
                    </div>

                    <div class="group-users"> <!--⭐⭐ 택시 모임에 참여한 인원 부분-->
                        {% for member in participant %}
                            <span class="members">{{ member.meeting.user_id.nickname }}</span>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <div class="comment"> <!--댓글 작성 부분-->
                <div class="comment-text">
                    <div class="comment-img"><img src="../../static/image/comment.png" alt=""></div>
                    <div class="comment-title">댓글 작성</div>
                </div>

                <form action="" method="post" id="comment-form"> <!--⭐⭐댓글 등록 textarea-->
                    {% csrf_token %}
                    <div>
                        <textarea name="comment" id="comment-area" placeholder="댓글 작성" maxlength="99"></textarea>
                        <div class="submit-btn">
                            <button type="submit">등록</button>
                        </div>
                    </div>
                </form>

                <div id="text-count">0 / 100</div>
            </div>

            <div class="line"></div> <!--구분선-->

            <div class="user-comment"> <!--⭐⭐ 댓글들-->
                <div class="comment-hd"> <!--댓글 윗부분 영역-->
                    <div><img src="../../static/image/profile-post-detail.png" alt=""></div> <!--프로필 사진-->
                    <div class="comment-nickname">나리1</div> <!--닉네임-->
                    <div class="comment-delete">삭제</div>
                </div>

                <div class="comment-content"> <!--댓글 내용-->
                    라면 레시피
                    1. 재료를 준비한다.
                    2. 물을 끓인다.
                    3. 스프를 넣는다.
                    4. 면을 넣는다.
                    5. 맛있게 먹는다.
                </div>
            </div>
            <div class="comment-line"></div> <!--댓글 구분선-->

            <div class="user-comment"> <!--⭐⭐ 댓글들-->
                <div class="comment-hd"> <!--댓글 윗부분 영역-->
                    <div><img src="../../static/image/profile-post-detail.png" alt=""></div> <!--프로필 사진-->
                    <div class="comment-nickname">나리1</div> <!--닉네임-->
                    <div class="comment-delete">삭제</div>
                </div>

                <div class="comment-content"> <!--댓글 내용-->
                    코드 올려줄테니 복붙해서 가져가세요~<br>
                    냐옹 냐아옹
                    ....?
                </div>
            </div>
            <div class="comment-line"></div> <!--댓글 끝-->

            {% if meeting.user_id == request.user %}
                <button type="button" id="dots-btn"> <!--⭐... 버튼-->
                    <img src="../../static/image/dots.png" alt="">
                </button>
            {% endif %}

            <div class="btns">
                <a href="board_edit.html">
                    <button type="button" class="edit-btn">수정하기</button> <!--⭐⭐수정하기 버튼-->
                </a>

                <button type="button" class="delete-btn">삭제하기</button> <!--⭐⭐삭제하기 버튼-->
            </div>

            <div id="modal"> <!--모달창-->
                <div class="modal-contents">
                    <!-- <div class="modal-close"></div> -->
                    <button type="button" class="btn-close"></button>
                    <div class="modal-title">글을 삭제하시겠습니까?</div>
                    <a href="#"><div class="closePopup">아니오</div></a>
                    <a href="#">
                        <form class="yesBtn" method="post">
                            <button type="button" class="delete_post">네</button> <!--⭐⭐여기 글 삭제 버튼-->
                        </form>
                    </a>
                </div>
            </div>

            <div class="settle-modal"> <!--정산하기 모달창-->
                <div class="settle-modal-title">정산하기</div>
                <form action="" method="post" class="settle-form"> <!--⭐⭐ 정산 폼-->
                    {% csrf_token %}
                    <input type="number" id="user_id" name="group-fee" placeholder="택시가격을 입력해주세요. ex) 8000" value="" required>

                    <div class="settle-modal-btns"> <!--확인, 취소 버튼-->
                        <button type="button" class="cancel-btn">취소</button>
                        <button type="submit" class="yes-btn">확인</button>
                    </div>
                </form>
            </div>
        </div>
        {% include 'menuBar_boards.html' %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="../../static/js/board_detail.js"></script>
</body>
</html>